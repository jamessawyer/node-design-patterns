import { db } from './01_db.mjs'
import { once } from 'node:events'
/**
 * ðŸ¤”ðŸ¤”ðŸ¤”
 * é’ˆå¯¹å¼‚æ­¥åˆå§‹åŒ–ç»„ä»¶é—®é¢˜çš„ç¬¬äºŒç§å¿«é€Ÿä½†ä¸å¤ªå¹²å‡€çš„è§£å†³æ–¹æ¡ˆæ¶‰åŠå»¶è¿Ÿä¾èµ–äºŽå¼‚æ­¥åˆå§‹åŒ–ç»„ä»¶çš„ä»»ä½•ä»£ç çš„æ‰§è¡Œï¼Œ
 * ç›´åˆ°ç»„ä»¶å®Œæˆå…¶åˆå§‹åŒ–ä¾‹ç¨‹ã€‚
 * 
 * è¿™ç§æŠ€æœ¯çš„ä¸»è¦ç¼ºç‚¹æ˜¯ï¼Œå®ƒè¦æ±‚æˆ‘ä»¬æå‰çŸ¥é“å“ªäº›ç»„ä»¶å°†ä½¿ç”¨å¼‚æ­¥åˆå§‹åŒ–çš„ç»„ä»¶ï¼Œ
 * è¿™ä½¿å¾—æˆ‘ä»¬çš„ä»£ç å¾ˆè„†å¼±ï¼Œå®¹æ˜“å‡ºé”™ã€‚
 */

/**
 * æ­¤é—®é¢˜çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯å»¶è¿Ÿæ•´ä¸ªåº”ç”¨ç¨‹åºçš„å¯åŠ¨ï¼Œç›´åˆ°æ‰€æœ‰å¼‚æ­¥æœåŠ¡åˆå§‹åŒ–ä¸ºæ­¢ã€‚è¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯ç®€å•æœ‰æ•ˆ
 * ä½†æ˜¯ï¼Œå®ƒå¯èƒ½ä¼šå¤§å¤§å»¶è¿Ÿåº”ç”¨ç¨‹åºçš„æ€»ä½“å¯åŠ¨æ—¶é—´ï¼Œè€Œä¸”ï¼Œå®ƒä¸ä¼šè€ƒè™‘å¿…é¡»é‡æ–°åˆå§‹åŒ–å¼‚æ­¥åˆå§‹åŒ–ç»„ä»¶çš„æƒ…å†µã€‚
 */


async function initialize() {
    db.connect()
    await once(db, 'connected')
}

async function updateLastAccess() {
    await db.query(`INSET (${Date.now()}) INTO "LastAccesses"`)
}

initialize()
    .then(() => {
        updateLastAccess()
        setTimeout(() => {
            updateLastAccess()
        }, 600)
    })

// æ‰§è¡ŒæŸ¥è¯¢: INSET (1730383577061) INTO "LastAccesses"
// æ‰§è¡ŒæŸ¥è¯¢: INSET (1730383577666) INTO "LastAccesses"